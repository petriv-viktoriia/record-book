<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Record Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <div class="alert alert-success" th:if="${message}" th:text="${message}"></div>
    <div class="alert alert-danger" th:if="${error}" th:text="${error}"></div>

    <div class="card">
        <div class="card-header">
            <h2 th:text="${record.title}">Record Title</h2>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <strong>Category:</strong>
                <span th:text="${categoryName}">Category</span>
            </div>
            <div class="mb-3">
                <strong>Author:</strong>
                <span th:text="${authorName}">Author</span>
            </div>
            <div class="mb-3">
                <strong>Created:</strong>
                <span th:text="${#temporals.format(record.publishedDate, 'dd-MM-yyyy HH:mm')}">Date</span>
            </div>
            <div class="mb-3" th:if="${not #lists.isEmpty(files)}">
                <strong>Attachments:</strong>
                <ul class="list-group">
                    <li th:each="file : ${files}" class="list-group-item">
                        <a th:href="${file.url}" th:text="${file.originalFilename}" target="_blank">
                            Filename
                        </a>
                    </li>
                </ul>
            </div>

            <div class="btn-group">
                <a th:href="@{/web/records/edit/{id}(id=${record.id})}"
                   class="btn btn-warning"
                   th:if="${#authentication.principal.id == record.authorId || #authentication.principal.role == 'ADMIN'}">
                    Edit
                </a>
                <form th:action="@{/web/records/delete/{id}(id=${record.id})}"
                      method="post"
                      th:if="${#authentication.principal.id == record.authorId || #authentication.principal.role == 'ADMIN'}"
                      style="display: inline;">
                    <input type="hidden" name="_method" value="DELETE"/>
                    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-danger"
                            onclick="return confirm('Are you sure you want to delete this record?')">
                        Delete
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>